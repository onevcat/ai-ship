---
title: "AI で早期最適化がより価値を持つ"
date: "2026-01-25"
tools: ["codex"]
category: "仕事"
action_button:
  text: "Chroma 原文を読む"
  url: "https://onevcat.com/2026/01/chroma/"
---

Chroma（Swift のターミナル向け構文ハイライトライブラリ）と `ca`（`cat` のハイライト代替）を書いた中で、最も記録すべきなのは機能そのものではなく、性能最適化が AI によって拡大された価値だ。継続的な benchmark 主導の反復で、tokenizer と renderer の性能はおよそ 10 倍まで押し上げられ、最適化は「満足するまで」進められる。

今回の実践の核はきわめて素朴だ。benchmark を一等市民として扱い、AI にコードを読ませ、ボトルネックを探し、複数案を出させ、理論的に効果を見積もる。毎回小さな変更だけを行い、すぐに計測して結果を次の改善にフィードバックする。最適化は数回の試行錯誤で疲弊する重労働ではなく、「仮説—検証—修正」の科学実験になる。AI の価値は天才的な微調整ではなく、試行錯誤のコストを十分に下げ、最適化を最後までやり切れるようにしてくれる点にある。

代表的な最適化もそれを示している。tokenizer/renderer を batch パイプラインから streaming に変更し、メモリとコピーのコストを体系的に下げる。ASCII が支配的な実入力分布には fast-path を用意し、非 ASCII では安全な経路にフォールバックする。どれも「ひらめき一発」ではないが、細かな変更と検証を大量に要し、まさに AI が担うのに向いた部分だ。

だからこそ「早すぎる最適化は万悪の源」という経験則は、AI 時代に再解釈が必要になる。かつて早期最適化を避けたのは、試行錯誤が高コストで、知力と時間の投資が難しかったからだ。しかし AI 開発ではそのコストが大幅に下がり、多くの最適化を前倒しで設計し、早期に検証し、反復できる。私はますます、早期最適化は工学的合理性に反するどころか、正しく効率的な道だと確信している。
